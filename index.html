<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Enhanced SEO Reporting Dashboard</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/moment@2.29.4/moment.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            transition: background-color 0.3s, color 0.3s;
        }
        .dashboard-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        .card {
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            padding: 20px;
            margin-bottom: 20px;
        }
        .tab {
            cursor: pointer;
            padding: 10px 20px;
            border-bottom: 2px solid transparent;
        }
        .tab.active {
            border-bottom: 2px solid #2563eb;
            font-weight: bold;
        }
        .tab-content {
            display: none;
        }
        .tab-content.active {
            display: block;
        }
        .dark-mode {
            background-color: #1f2937;
            color: #e5e7eb;
        }
        .dark-mode .card {
            background: #374151;
        }
        .dark-mode .tab.active {
            border-bottom: 2px solid #60a5fa;
        }
    </style>
</head>
<body class="bg-gray-100">
    <div class="dashboard-container">
        <div class="flex justify-between items-center mb-6">
            <h1 class="text-3xl font-bold text-gray-800">SEO Reporting Dashboard</h1>
            <div class="flex items-center space-x-4">
                <select id="themeToggle" class="border rounded p-2">
                    <option value="light">Light Theme</option>
                    <option value="dark">Dark Theme</option>
                </select>
                <select id="dateRange" class="border rounded p-2">
                    <option value="7">Last 7 Days</option>
                    <option value="30">Last 30 Days</option>
                    <option value="90">Last 90 Days</option>
                    <option value="custom">Custom Range</option>
                </select>
            </div>
        </div>

        <!-- Custom Date Range Picker -->
        <div id="customDatePicker" class="hidden mb-4 card">
            <label class="block text-sm font-medium text-gray-700">Select Date Range:</label>
            <input type="date" id="startDate" class="border rounded p-2 mr-2">
            <input type="date" id="endDate" class="border rounded p-2">
            <button id="applyDateRange" class="bg-blue-600 text-white px-4 py-2 rounded ml-2">Apply</button>
        </div>

        <!-- Tabs -->
        <div class="border-b mb-6">
            <div class="flex">
                <div class="tab active" data-tab="overview">Overview</div>
                <div class="tab" data-tab="traffic">Traffic Analysis</div>
                <div class="tab" data-tab="keywords">Keyword Performance</div>
                <div class="tab" data-tab="backlinks">Backlinks</div>
            </div>
        </div>

        <!-- Tab Content -->
        <div id="overview" class="tab-content active">
            <!-- Key Metrics -->
            <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
                <div class="card">
                    <h3 class="text-lg font-semibold text-gray-600">Organic Traffic</h3>
                    <p id="organicTraffic" class="text-2xl font-bold text-blue-600">125,430</p>
                    <p id="trafficChange" class="text-sm text-green-500">+12.5% vs last period</p>
                </div>
                <div class="card">
                    <h3 class="text-lg font-semibold text-gray-600">Keyword Rankings</h3>
                    <p id="keywordRankings" class="text-2xl font-bold text-blue-600">1,245</p>
                    <p id="keywordChange" class="text-sm text-green-500">+8.3% vs last period</p>
                </div>
                <div class="card">
                    <h3 class="text-lg font-semibold text-gray-600">Bounce Rate</h3>
                    <p id="bounceRate" class="text-2xl font-bold text-blue-600">42.3%</p>
                    <p id="bounceChange" class="text-sm text-red-500">-2.1% vs last period</p>
                </div>
                <div class="card">
                    <h3 class="text-lg font-semibold text-gray-600">Conversion Rate</h3>
                    <p id="conversionRate" class="text-2xl font-bold text-blue-600">3.8%</p>
                    <p id="conversionChange" class="text-sm text-green-500">+0.5% vs last period</p>
                </div>
            </div>
        </div>

        <div id="traffic" class="tab-content">
            <div class="card">
                <h3 class="text-lg font-semibold text-gray-600 mb-4">Organic Traffic Trend</h3>
                <canvas id="trafficChart" height="100"></canvas>
            </div>
        </div>

        <div id="keywords" class="tab-content">
            <div class="card">
                <h3 class="text-lg font-semibold text-gray-600 mb-4">Keyword Performance</h3>
                <canvas id="keywordChart" height="100"></canvas>
            </div>
        </div>

        <div id="backlinks" class="tab-content">
            <div class="card">
                <h3 class="text-lg font-semibold text-gray-600 mb-4">Recent Backlinks</h3>
                <table class="w-full text-left">
                    <thead>
                        <tr class="text-gray-600">
                            <th class="p-2">Source URL</th>
                            <th class="p-2">Domain Authority</th>
                            <th class="p-2">Date Acquired</th>
                        </tr>
                    </thead>
                    <tbody id="backlinksTable">
                        <!-- Populated dynamically -->
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Data Integration -->
        <div class="card mt-6">
            <h3 class="text-lg font-semibold text-gray-600 mb-4">Data Integration</h3>
            <select id="dataSource" class="border rounded p-2 mb-4">
                <option value="google">Google Analytics</option>
                <option value="ahrefs">Ahrefs</option>
                <option value="semrush">SEMrush</option>
            </select>
            <button id="fetchData" class="bg-blue-600 text-white px-4 py-2 rounded">Fetch Data</button>
        </div>
    </div>

    <script>
        // Sample data for different date ranges
        const dataStore = {
            '7': {
                traffic: [80000, 82000, 85000, 90000, 95000, 100000, 125430],
                keywords: [100, 300, 600, 1245],
                metrics: { traffic: 125430, keywords: 1245, bounce: 42.3, conversion: 3.8 },
                backlinks: [
                    { url: 'example.com/blog', da: 82, date: '2025-04-10' },
                    { url: 'news.site/article', da: 75, date: '2025-04-08' }
                ]
            },
            '30': {
                traffic: [75000, 78000, 80000, 85000, 90000, 95000, 100000, 105000, 110000, 115000, 120000, 125430],
                keywords: [80, 250, 500, 1100],
                metrics: { traffic: 115000, keywords: 1100, bounce: 45.0, conversion: 3.5 },
                backlinks: [
                    { url: 'techblog.io/post', da: 68, date: '2025-04-05' },
                    { url: 'example.com/blog', da: 82, date: '2025-04-10' }
                ]
            },
            '90': {
                traffic: [70000, 72000, 75000, 78000, 80000, 85000, 90000, 95000, 100000, 110000, 115000, 125430],
                keywords: [50, 200, 400, 1000],
                metrics: { traffic: 110000, keywords: 1000, bounce: 47.0, conversion: 3.2 },
                backlinks: [
                    { url: 'news.site/article', da: 75, date: '2025-04-08' }
                ]
            }
        };

        let currentChartInstances = {};

        // Tab Switching
        document.querySelectorAll('.tab').forEach(tab => {
            tab.addEventListener('click', () => {
                document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
                document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
                tab.classList.add('active');
                document.getElementById(tab.dataset.tab).classList.add('active');
            });
        });

        // Theme Toggle
        document.getElementById('themeToggle').addEventListener('change', (e) => {
            document.body.classList.toggle('dark-mode', e.target.value === 'dark');
        });

        // Date Range Handling
        document.getElementById('dateRange').addEventListener('change', (e) => {
            const customPicker = document.getElementById('customDatePicker');
            customPicker.classList.toggle('hidden', e.target.value !== 'custom');
            if (e.target.value !== 'custom') {
                updateDashboard(e.target.value);
            }
        });

        // Custom Date Range
        document.getElementById('applyDateRange').addEventListener('click', () => {
            const start = document.getElementById('startDate').value;
            const end = document.getElementById('endDate').value;
            if (start && end) {
                updateDashboard('custom', { start, end });
            }
        });

        // Data Integration
        document.getElementById('fetchData').addEventListener('click', () => {
            const source = document.getElementById('dataSource').value;
            alert(`Fetching data from ${source}... (Simulated)`);
            // Simulate API call
            updateDashboard(document.getElementById('dateRange').value);
        });

        // Update Dashboard
        function updateDashboard(range, customRange) {
            const data = dataStore[range] || dataStore['7']; // Fallback to 7 days
            const labels = range === '7' ? ['Day 1', 'Day 2', 'Day 3', 'Day 4', 'Day 5', 'Day 6', 'Day 7'] :
                           range === '30' ? Array.from({length: 12}, (_, i) => `Day ${i+1}`) :
                           range === '90' ? Array.from({length: 12}, (_, i) => `Week ${i+1}`) :
                           customRange ? [moment(customRange.start).format('MMM D'), moment(customRange.end).format('MMM D')] : [];

            // Update Metrics
            document.getElementById('organicTraffic').textContent = data.metrics.traffic.toLocaleString();
            document.getElementById('keywordRankings').textContent = data.metrics.keywords.toLocaleString();
            document.getElementById('bounceRate').textContent = `${data.metrics.bounce}%`;
            document.getElementById('conversionRate').textContent = `${data.metrics.conversion}%`;

            // Update Charts
            if (currentChartInstances.traffic) currentChartInstances.traffic.destroy();
            currentChartInstances.traffic = new Chart(document.getElementById('trafficChart').getContext('2d'), {
                type: 'line',
                data: {
                    labels,
                    datasets: [{
                        label: 'Organic Traffic',
                        data: data.traffic,
                        borderColor: '#2563eb',
                        fill: false,
                        tension: 0.3
                    }]
                },
                options: {
                    responsive: true,
                    scales: { y: { beginAtZero: true, title: { display: true, text: 'Visitors' } } }
                }
            });

            if (currentChartInstances.keyword) currentChartInstances.keyword.destroy();
            currentChartInstances.keyword = new Chart(document.getElementById('keywordChart').getContext('2d'), {
                type: 'bar',
                data: {
                    labels: ['Top 3', 'Top 10', 'Top 20', 'Top 50'],
                    datasets: [{
                        label: 'Keywords',
                        data: data.keywords,
                        backgroundColor: '#2563eb'
                    }]
                },
                options: {
                    responsive: true,
                    scales: { y: { beginAtZero: true, title: { display: true, text: 'Number of Keywords' } } }
                }
            });

            // Update Backlinks
            const backlinksTable = document.getElementById('backlinksTable');
            backlinksTable.innerHTML = data.backlinks.map(link => `
                <tr class="border-t">
                    <td class="p-2"><a href="#" class="text-blue-500 hover:underline">${link.url}</a></td>
                    <td class="p-2">${link.da}</td>
                    <td class="p-2">${link.date}</td>
                </tr>
            `).join('');
        }

        // Initial Load
        updateDashboard('7');
    </script>
</body>
</html>
